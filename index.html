<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Bren</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

<style>
:root {
    --bg: #f6f1ec;
    --card: #ffffff;
    --accent: #c89b8c;
    --soft: #efe6df;
    --text: #3a3a3a;
}

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    height: 100vh;
    overflow: hidden;
    font-family: 'Inter', sans-serif;
    background: linear-gradient(180deg, #f6f1ec, #f2ebe5);
    color: var(--text);
}

.wrapper {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

.card {
    width: 92%;
    max-width: 540px;
    height: 80vh;
    background: var(--card);
    padding: 28px 28px 18px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.08);
    border-radius: 18px;
    display: flex;
    flex-direction: column;
}

/* PROGRESS BAR */
.progress {
    height: 4px;
    background: var(--soft);
    border-radius: 2px;
    overflow: hidden;
    margin-bottom: 16px;
}

.progress span {
    display: block;
    height: 100%;
    width: 0%;
    background: var(--accent);
    transition: width 0.4s ease;
}

/* DIAGRAM */
.diagram {
    text-align: center;
    margin-top: auto;
    margin-bottom: auto;
}

.diagram img {
    width: 100%;
    border-radius: 12px;
    margin-bottom: 24px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

.button {
    padding: 12px 30px;
    border: none;
    background: var(--accent);
    color: #fff;
    font-size: 0.9rem;
    border-radius: 30px;
    cursor: pointer;
}

/* TEXT AREA */
.text {
    display: none;
    flex: 1;
    overflow-y: auto;
    padding-right: 6px;
}

.text.active {
    display: block;
}

.text::-webkit-scrollbar {
    width: 4px;
}
.text::-webkit-scrollbar-thumb {
    background: var(--soft);
    border-radius: 4px;
}

h1 {
    font-family: 'Playfair Display', serif;
    font-weight: 600;
    margin-bottom: 20px;
}

p {
    line-height: 1.9;
    margin-bottom: 22px;
}

.highlight {
    color: var(--accent);
    font-weight: 500;
}

/* FOOT */
.actions {
    text-align: center;
    margin-top: 10px;
}

.button.secondary {
    background: transparent;
    color: var(--accent);
    border: 1px solid var(--accent);
    font-size: 0.8rem;
}
</style>
</head>

<body>

<div class="wrapper">
    <div class="card">

        <div class="progress">
            <span id="progressBar"></span>
        </div>

        <!-- DIAGRAM -->
        <div class="diagram" id="diagram">
            <img src="images/diagram.png" alt="Diagram">
            <button class="button" onclick="startReading()">Open</button>
        </div>

        <!-- TEXT -->
        <div class="text" id="text">
            <div id="content"></div>
        </div>

        <div class="actions">
            <button class="button secondary" onclick="showDiagram()">View Diagram</button>
        </div>

    </div>
</div>

<script>
const paragraphs = [
`<h1>Hi, Bren.</h1>
<p>I’m writing this because I want everything to be clear between us.</p>`,

`<p>
All the effort and attention I’ve given you lately
is because <span class="highlight">my feelings are still the same today.</span>
</p>`,

`<p>
This isn’t about fixing the past.
It’s about being honest with where I am right now.
</p>`,

`<p>
I want to keep things calm and unforced.
Your comfort matters more to me than moving fast.
</p>`,

`<p>
I just need your honesty —
is there still a window for us, or is that door closed?
</p>
<p>Whatever your answer is, I’ll respect it.</p>
<p>— Jonathan</p>`
];

let index = 0;

function updateProgress() {
    document.getElementById('progressBar').style.width =
        ((index + 1) / paragraphs.length) * 100 + '%';
}

function startReading() {
    document.getElementById('diagram').style.display = 'none';
    document.getElementById('text').classList.add('active');
    document.getElementById('content').innerHTML = paragraphs[0];
    index = 0;
    updateProgress();
}

function showDiagram() {
    document.getElementById('text').classList.remove('active');
    document.getElementById('diagram').style.display = 'block';
    document.getElementById('progressBar').style.width = '0%';
}

/* SCROLL / SWIPE */
let lastScroll = 0;
document.getElementById('text').addEventListener('scroll', (e) => {
    const el = e.target;
    const progress = el.scrollTop / (el.scrollHeight - el.clientHeight);
    document.getElementById('progressBar').style.width = (progress * 100) + '%';
});

/* STEP NAVIGATION */
document.getElementById('text').addEventListener('wheel', (e) => {
    if (Math.abs(e.deltaY) < 40) return;
    navigate(e.deltaY > 0 ? 1 : -1);
});

let touchStartY = 0;
document.getElementById('text').addEventListener('touchstart', e => {
    touchStartY = e.touches[0].clientY;
});
document.getElementById('text').addEventListener('touchend', e => {
    const delta = touchStartY - e.changedTouches[0].clientY;
    if (Math.abs(delta) > 50) {
        navigate(delta > 0 ? 1 : -1);
    }
});

function navigate(step) {
    index = Math.min(paragraphs.length - 1, Math.max(0, index + step));
    document.getElementById('content').innerHTML = paragraphs[index];
    document.getElementById('text').scrollTop = 0;
    updateProgress();
}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Bren</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

<style>
:root {
    --bg: #f6f1ec;
    --card: #ffffff;
    --accent: #c89b8c;
    --soft: #efe6df;
    --text: #3a3a3a;
}

* { box-sizing: border-box; }

body {
    margin: 0;
    height: 100vh;
    overflow: hidden;
    font-family: 'Inter', sans-serif;
    background: linear-gradient(180deg, #f6f1ec, #f2ebe5);
    color: var(--text);
}

.wrapper {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

.card {
    width: 92%;
    max-width: 520px;
    max-height: 70vh;
    background: var(--card);
    padding: 34px 34px 26px;
    box-shadow: 0 16px 36px rgba(0,0,0,0.08);
    border-radius: 16px;
    display: flex;
    flex-direction: column;
}

/* PROGRESS */
.progress {
    height: 3px;
    background: var(--soft);
    border-radius: 2px;
    overflow: hidden;
    margin-bottom: 18px;
    display: none;
}
.progress span {
    height: 100%;
    display: block;
    width: 0%;
    background: var(--accent);
    transition: width 0.4s ease;
}

/* FLOWCHART */
.diagram {
    text-align: center;
    margin: auto 0;
}
.diagram img {
    width: 100%;
    border-radius: 12px;
    margin-bottom: 26px;
    box-shadow: 0 8px 18px rgba(0,0,0,0.08);
}

/* BUTTONS */
.button {
    padding: 11px 28px;
    border: none;
    background: var(--accent);
    color: #fff;
    font-size: 0.85rem;
    border-radius: 24px;
    cursor: pointer;
}
.button.secondary {
    background: transparent;
    color: var(--accent);
    border: 1px solid var(--accent);
}

/* LETTER */
.text {
    display: none;
    flex: 1;
    overflow-y: auto;
    padding-right: 6px;
}
.text.active { display: block; }

.text::-webkit-scrollbar {
    width: 4px;
}
.text::-webkit-scrollbar-thumb {
    background: var(--soft);
    border-radius: 4px;
}

h1 {
    font-family: 'Playfair Display', serif;
    font-weight: 600;
    margin-bottom: 18px;
}

p {
    line-height: 1.85;
    margin-bottom: 20px;
}

.highlight {
    color: var(--accent);
    font-weight: 500;
}

/* BACK */
.back {
    display: none;
    margin-top: 18px;
    text-align: center;
}
</style>
</head>

<body>

<div class="wrapper">
    <div class="card">

        <!-- PROGRESS -->
        <div class="progress" id="progress">
            <span id="progressBar"></span>
        </div>

        <!-- FLOWCHART -->
        <div class="diagram" id="diagram">
            <img src="images/diagram.png" alt="Flowchart">
            <button class="button" onclick="startReading()">Open Letter</button>
        </div>

        <!-- LETTER -->
        <div class="text" id="text">
            <div id="content"></div>
        </div>

        <!-- BACK -->
        <div class="back" id="backNav">
            <button class="button secondary" onclick="goHome()">Back to Beginning</button>
        </div>

    </div>
</div>

<script>
const paragraphs = [
`<h1>Hi, Bren.</h1>
<p>I’m writing this because I want everything to be clear between us.</p>`,

`<p>
All the effort and attention I’ve given you lately
is because <span class="highlight">my feelings are still the same today.</span>
</p>`,

`<p>
This isn’t about fixing the past.
It’s about being honest with where I am right now.
</p>`,

`<p>
I want to keep things calm and unforced.
Your comfort matters more to me than moving fast.
</p>`,

`<p>
I just need your honesty —
is there still a window for us, or is that door closed?
</p>
<p>Whatever your answer is, I’ll respect it.</p>
<p>— Jonathan</p>`
];

let index = 0;

/* PROGRESS */
function updateProgress() {
    document.getElementById('progressBar').style.width =
        ((index + 1) / paragraphs.length) * 100 + '%';
}

/* START */
function startReading() {
    document.getElementById('diagram').style.display = 'none';
    document.getElementById('text').classList.add('active');
    document.getElementById('progress').style.display = 'block';
    document.getElementById('backNav').style.display = 'block';
    index = 0;
    document.getElementById('content').innerHTML = paragraphs[index];
    updateProgress();
}

/* NAVIGATION */
function navigate(step) {
    index = Math.min(paragraphs.length - 1, Math.max(0, index + step));
    document.getElementById('content').innerHTML = paragraphs[index];
    document.getElementById('text').scrollTop = 0;
    updateProgress();
}

/* BACK HOME */
function goHome() {
    document.getElementById('diagram').style.display = 'block';
    document.getElementById('text').classList.remove('active');
    document.getElementById('progress').style.display = 'none';
    document.getElementById('backNav').style.display = 'none';
    document.getElementById('progressBar').style.width = '0%';
}

/* PC SCROLL */
document.getElementById('text').addEventListener('wheel', e => {
    if (Math.abs(e.deltaY) > 40) navigate(e.deltaY > 0 ? 1 : -1);
});

/* MOBILE SWIPE */
let touchStartY = 0;
document.getElementById('text').addEventListener('touchstart', e => {
    touchStartY = e.touches[0].clientY;
});
document.getElementById('text').addEventListener('touchend', e => {
    const delta = touchStartY - e.changedTouches[0].clientY;
    if (Math.abs(delta) > 50) navigate(delta > 0 ? 1 : -1);
});
</script>

</body>
</html>
